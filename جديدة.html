<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>محول الأنظمة العددية</title>
  <link rel="stylesheet" href="style.css"/>
</head>
<body>
  <!-- إدراج الأجزاء -->
  <div id="header"></div>
  <div id="sidebar-container"></div>

  <!-- محتوى الصفحة -->
  <main>
    <div class="app">
      <h2>✏️ رسم منحنى دالة</h2>

<label>اكتب الدالة (x):</label><br>
<input type="text" id="func" value="Math.sin(x)" style="width:300px"><br><br>

<label>من:</label>
<input type="number" id="start" value="-10">
<label>إلى:</label>
<input type="number" id="end" value="10">
<label>عدد النقاط:</label>
<input type="number" id="steps" value="200"><br><br>

<button onclick="drawFunction()">🎨 ارسم</button>

<canvas id="myChart"></canvas>

<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script>
  let chart;

  function drawFunction() {
    const funcText = document.getElementById("func").value;
    const start = parseFloat(document.getElementById("start").value);
    const end = parseFloat(document.getElementById("end").value);
    const steps = parseInt(document.getElementById("steps").value);

    const xValues = [];
    const yValues = [];
    const stepSize = (end - start) / steps;

    for (let i = 0; i <= steps; i++) {
      const x = start + i * stepSize;
      let y;
      try {
        y = eval(funcText); // ⚠️ يستخدم الدالة المكتوبة
      } catch {
        y = NaN;
      }
      xValues.push(x.toFixed(2));
      yValues.push(y);
    }

    if (chart) chart.destroy();

    const ctx = document.getElementById("myChart").getContext("2d");
    chart = new Chart(ctx, {
      type: "line",
      data: {
        labels: xValues,
        datasets: [{
          label: "y = " + funcText,
          data: yValues,
          borderColor: "blue",
          fill: false,
          pointRadius: 0,
          borderWidth: 2
        }]
      },
      options: {
        responsive: true,
        scales: {
          y: { beginAtZero: false }
        }
      }
    });
  }
</script>

      <!-- هنا تبني الأدوات -->
    </div>
  </main>

  <div id="footer"></div>

<script>
  // تحميل الأجزاء
  function includeHTML(file, elementId) {
    fetch(file)
      .then(r => r.text())
      .then(html => { document.getElementById(elementId).innerHTML = html; })
      .catch(() => {});
  }
  includeHTML("header.html", "header");
  includeHTML("sidebar.html", "sidebar-container");
  includeHTML("footer.html", "footer");

  // فتح/إغلاق القائمة الجانبية
  function toggleSidebar() {
    const el = document.getElementById('sidebar'); // داخل sidebar.html
    if (el) el.classList.toggle('open');
  }

  // إغلاق القائمة عند الضغط في مكان فارغ
  document.addEventListener("click", function (event) {
    const sidebar = document.getElementById("sidebar");
    const menuBtn = document.querySelector(".menu-btn");

    if (
      sidebar &&
      sidebar.classList.contains("open") &&
      !sidebar.contains(event.target) &&
      !menuBtn.contains(event.target)
    ) {
      sidebar.classList.remove("open");
    }
  });

  // ====== دوال التحويل ======
  // ... باقي الدوال تبقى كما هي ...
</script>

</body>
</html>
